var $url="/profile",data=utils.init({uploadUrl:null,uploadFileList:[],form:null,styles:null}),methods={apiGet:function(){var t=this;$api.get($url).then(function(i){var a=i.data;t.form=_.assign({},a.user),t.styles=a.styles,t.form.avatarUrl&&t.uploadFileList.push({name:"avatar",url:t.form.avatarUrl})}).catch(function(t){utils.error(t)}).then(function(){utils.loading(t,!1)})},apiSubmit:function(){var t=this;utils.loading(this,!0),$api.post($url,this.form).then(function(t){utils.success("资料修改成功！")}).catch(function(t){utils.error(t)}).then(function(){utils.loading(t,!1)})},btnSubmitClick:function(){var t=this;this.$refs.form.validate(function(i){i&&t.apiSubmit()})},uploadBefore:t=>/(\.jpg|\.jpeg|\.bmp|\.gif|\.png|\.webp)$/i.exec(t.name)?!!(t.size/1024/1024<10)||(utils.error("头像图片大小不能超过 10MB!"),!1):(utils.error("头像只能是图片格式，请选择有效的文件上传!"),!1),uploadProgress:function(){utils.loading(this,!0)},uploadSuccess:function(t,i,a){this.form.avatarUrl=t.value,utils.loading(this,!1),a.length>1&&a.splice(0,1)},uploadError:function(t){utils.loading(this,!1);var i=JSON.parse(t.message);utils.error(i.message)},uploadRemove(t){this.form.avatarUrl=null}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){this.uploadUrl=$apiUrl+$url+"/actions/upload",this.apiGet()}});